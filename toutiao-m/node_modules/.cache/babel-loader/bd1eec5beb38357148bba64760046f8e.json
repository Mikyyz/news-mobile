{"remainingRequest":"/Users/mikyyz/vue-trip/toutiao-m/node_modules/babel-loader/lib/index.js!/Users/mikyyz/vue-trip/toutiao-m/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mikyyz/vue-trip/toutiao-m/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mikyyz/vue-trip/toutiao-m/src/views/my/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mikyyz/vue-trip/toutiao-m/src/views/my/index.vue","mtime":1602167939887},{"path":"/Users/mikyyz/vue-trip/toutiao-m/.babelrc","mtime":1600614206934},{"path":"/Users/mikyyz/vue-trip/toutiao-m/node_modules/cache-loader/dist/cjs.js","mtime":1599750694245},{"path":"/Users/mikyyz/vue-trip/toutiao-m/node_modules/babel-loader/lib/index.js","mtime":1590300945779},{"path":"/Users/mikyyz/vue-trip/toutiao-m/node_modules/cache-loader/dist/cjs.js","mtime":1599750694245},{"path":"/Users/mikyyz/vue-trip/toutiao-m/node_modules/vue-loader/lib/index.js","mtime":1599750700770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21pa3l5ei92dWUtdHJpcC90b3V0aWFvLW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvbWlreXl6L3Z1ZS10cmlwL3RvdXRpYW8tbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSAnQC9hcGkvdXNlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFVzZXI6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsndXNlciddKSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZEN1cnJlbnRVc2VyKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkQ3VycmVudFVzZXI6IGZ1bmN0aW9uIGxvYWRDdXJyZW50VXNlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRnZXRDdXJyZW50VXNlciwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFVzZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGdldEN1cnJlbnRVc2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkZ2V0Q3VycmVudFVzZXIuZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRVc2VyID0gZGF0YS5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25Mb2dvdXQ6IGZ1bmN0aW9uIG9uTG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGRpYWxvZy5jb25maXJtKHsKICAgICAgICB0aXRsZTogJ+mAgOWHuuehruiupCcsCiAgICAgICAgbWVzc2FnZTogJ+mAgOWHuuW9k+WJjei0puWPt++8jOWwhuS4jeiDveWQjOatpeaUtuiXjyzlj5HluIPor4TorrrlkozkupHnq6/liIbkuqvnrYknCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8v54K55Ye756Gu6K6k5ZCO5riF6Zmk55So5oi355m75b2V54q25oCBCiAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoJ3NldFVzZXInLCBudWxsKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgey8vIG9uIGNhbmNlbAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,SAAA,QAAA,QAAA,MAAA;AACA,SAAA,cAAA,QAAA,YAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,MAAA,CAAA,CADA,CANA;AASA,EAAA,OATA,qBASA;AACA,SAAA,eAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,cAAA,EADA;;AAAA;AAAA;AACA,gBAAA,IADA,yBACA,IADA;AAEA,gBAAA,KAAA,CAAA,WAAA,GAAA,IAAA,CAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KAJA;AAKA,IAAA,QALA,sBAKA;AAAA;;AACA,WAAA,OAAA,CAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA;AAFA,OAAA,EAGA,IAHA,CAGA,YAAA;AACA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA;AACA,OANA,EAMA,KANA,CAMA,YAAA,CACA;AACA,OARA;AASA;AAfA;AAZA,CAAA","sourcesContent":["<template>\n    <div class=\"my-container\">\n        <van-cell-group class=\"my-info-box\" v-if=\"user\">\n            <van-cell title=\"单元格\" value=\"内容\" center :border=\"false\" class=\"base-info\">\n                <van-image \n                    slot=\"icon\"\n                    fit=\"cover\" \n                    round\n                    class=\"avatar\"\n                    src=\"currentUser.photo\" \n                />\n                <div slot=\"title\" class=\"username\">{{ currentUser.name }}</div>\n                <van-button size=\"mini\" class=\"edit-btn\" round>\n                    编辑资料\n                </van-button>\n            </van-cell>\n            <van-grid :border=\"false\" class=\"data-info\">\n                <van-grid-item class=\"data-info-item\">\n                    <div slot=\"text\" class=\"text-wrap\">\n                        <span class=\"count\">{{ currentUser.art_count }}</span>\n                        <span class=\"text\">头条</span>\n                    </div>\n                </van-grid-item>\n                <van-grid-item class=\"data-info-item\">\n                    <div slot=\"text\" class=\"text-wrap\">\n                        <span class=\"count\">{{ currentUser.follow_count }}</span>\n                        <span class=\"text\">关注</span>\n                    </div>\n                </van-grid-item>\n                <van-grid-item class=\"data-info-item\">\n                    <div slot=\"text\" class=\"text-wrap\">\n                        <span class=\"count\">{{ currentUser.fans_count }}</span>\n                        <span class=\"text\">粉丝</span>\n                    </div>\n                </van-grid-item>\n                <van-grid-item class=\"data-info-item\">\n                    <div slot=\"text\" class=\"text-wrap\">\n                        <span class=\"count\">{{ currentUser.like_count }}</span>\n                        <span class=\"text\">获赞</span>\n                    </div>\n                </van-grid-item>\n            </van-grid>\n        </van-cell-group>\n        <div v-else class=\"not-login\">\n            <div class=\"not-login-wrapper\" @click=\"$router.push('/login')\">\n                <div class=\"not-login-img\">\n                    <van-icon name=\"graphic\" size=\"55\" color=\"#1989fa\" />\n                </div>\n                <div class=\"login-text\">登录 / 注册</div>\n            </div>\n        </div>\n        <van-grid :border=\"false\" :column-num=\"2\" class=\"nav-grid\">\n            <van-grid-item  icon=\"star-o\" text=\"收藏\" class=\"nav-grid-item\" />\n            <van-grid-item icon=\"clock-o\" text=\"历史\" class=\"nav-grid-item\" />\n        </van-grid>\n        <van-cell-group class=\"cell-box\" :border=\"false\">\n            <van-cell title=\"消息通知\" is-link to=\"\" />\n            <van-cell title=\"小智同学\" is-link to=\"\" />\n        </van-cell-group>\n        <van-cell class=\"login-out\" v-if=\"user\" @click=\"onLogout\" title=\"退出登录\" />\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { getCurrentUser } from '@/api/user';\n\n    export default {\n        data() {\n            return {\n                currentUser: {}\n            }\n        },\n        computed: {\n            ...mapState(['user'])\n        },\n        created () {\n            this.loadCurrentUser();\n        },\n        methods: {\n            async loadCurrentUser() {\n                const { data } = await getCurrentUser();\n                this.currentUser = data.data;\n            },\n            onLogout() {\n                this.$dialog.confirm({\n                        title: '退出确认',\n                        message: '退出当前账号，将不能同步收藏,发布评论和云端分享等',\n                    }).then(() => {\n                        //点击确认后清除用户登录状态\n                        this.$store.commit('setUser', null);\n                    }).catch(() => {\n                    // on cancel\n                });\n            }\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\nbody {\n    background-color: #FAFAFA;\n    color: #333;\n}\n.my-container {\n    .my-info-box {\n        background: url('./banner.png') no-repeat;\n        background-size: cover;\n    }\n    .base-info {\n        height: 116px;\n        box-sizing: border-box;\n        background-color: unset;\n        padding-top: 38px;\n        padding-left: 16px;\n        padding-bottom: 12px;\n        .avatar {\n            width: 60px;\n            height: 60px;\n            border: 2px solid #fff;\n        }\n        .username {\n            font-size: 15px;\n            color: #fff;\n            margin-left: 10px;\n        }\n        .edit-btn {\n            padding: 6px 15px;\n            color: #666;\n            font-size: 14px;\n        }\n    }\n    .data-info {\n        .data-info-item {\n            height: 65px;\n            .text-wrap {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                color: #fff;\n                .count {\n                    font-size: 18px;\n                }\n                .text {\n                    font-size: 12px;\n                }\n            }\n        }\n    }\n    .nav-grid {\n        .nav-grid-item {\n            height: 70px;\n            background-color: #fff;\n            .van-icon-star-o{\n                font-size: 24px;\n                color: #eb5253;\n            }\n            .van-icon-clock-o {\n                font-size: 24px;\n                color: #ff9d1d;\n            }\n        }\n    }\n    /deep/ .van-grid-item__content {\n        background-color: unset;\n    }\n    .cell-box {\n        margin: 6px 0;\n    }\n    .login-out {\n        height: 47px;\n        text-align: center;\n        color: #db6262;\n        margin-bottom: 4px;\n    }\n    .not-login {\n        width: 100%;\n        height: 180px;\n        background: url('./banner.png') no-repeat;\n        background-size: cover;\n    }\n    .not-login-wrapper {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n    .not-login-img {\n        width: 70px;\n        height: 70px;\n        border-radius: 50%;\n        background-color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .login-text {\n        font-size: 18px;\n        color: #fff;\n    }\n}\n\n</style>"],"sourceRoot":"src/views/my"}]}